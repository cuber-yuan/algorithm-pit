{% extends 'base.html' %}

{% block title %}Register{% endblock %}

{% block sidebar_left %}
{% endblock %}
{% block sidebar_right %}
{% endblock %}

{% block content %}
<div class="max-w-md mx-auto mt-10 bg-white p-8 rounded shadow">
    <h2 class="text-2xl font-bold mb-6">Register</h2>
    <form method="post" id="register-form">
        <div class="mb-4">
            <label class="block mb-1" for="username">Username</label>
            <input class="w-full border px-3 py-2 rounded" type="text" name="username" id="username" required minlength="4" autocomplete="off">
        </div>
        <div class="mb-4">
            <label class="block mb-1" for="password">Password</label>
            <input class="w-full border px-3 py-2 rounded" type="password" name="password" id="password" required minlength="6" autocomplete="off">
        </div>
        <div class="mb-6">
            <label class="block mb-1" for="confirm_password">Confirm Password</label>
            <input class="w-full border px-3 py-2 rounded" type="password" name="confirm_password" id="confirm_password" required minlength="6" autocomplete="off">
        </div>
        <div class="mb-4">
            <label class="block mb-1" for="email">Email</label>
            <input class="w-full border px-3 py-2 rounded" type="email" name="email" id="email" required autocomplete="off">
        </div>
        <div id="error-message" class="text-red-600 mb-4"></div>
        <button class="w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700" type="submit">Register</button>
    </form>
</div>
<script>
document.getElementById('register-form').onsubmit = function(e) {
    const username = document.getElementById('username').value.trim();
    const email = document.getElementById('email').value.trim();
    const password = document.getElementById('password').value;
    const confirm = document.getElementById('confirm_password').value;
    const errorDiv = document.getElementById('error-message');
    errorDiv.textContent = '';

    
    if (username.length < 4) {
        errorDiv.textContent = 'Username must be at least 4 characters.';
        e.preventDefault();
        return false;
    }
    
    if (!/^[\w\.-]+@[\w\.-]+\.\w+$/.test(email)) {
        errorDiv.textContent = 'Please enter a valid email address.';
        e.preventDefault();
        return false;
    }
    
    if (password.length < 6) {
        errorDiv.textContent = 'Password must be at least 6 characters.';
        e.preventDefault();
        return false;
    }
    
    if (password !== confirm) {
        errorDiv.textContent = 'Passwords do not match.';
        e.preventDefault();
        return false;
    }
};
</script>
{% endblock %}